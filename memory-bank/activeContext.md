# Актуальный контекст проекта "Администрирование Афиши Театра"

## Текущий фокус работы:
*   Рефакторинг и организация файлов памяти проекта в соответствии с новой структурой `memory-bank`.
*   Интеграция функционала управления составом исполнителей и генерации карточек для социальных сетей.

## Последние изменения:
*   Исправлена проблема с парсингом шаблонов спектаклей, где длинное тире "–" заменялось на короткое тире "—" в шаблоне спектакля "Путешествие муравьишки" (ID: 25).
*   Добавлена функция `updatePlayTemplate` в `theater_repertoire/db.php` для обновления текста шаблона спектакля.
*   Временные скрипты `get_play_info.php` и `update_template_script.php` были созданы и затем удалены.

## Следующие шаги:
1.  Завершить создание всех файлов в папке `memory-bank`.
2.  Удалить старые файлы `PROJECT_MEMORY.md` и `theatre_schedule_project_plan.md`.
3.  Продолжить разработку согласно плану, описанному в `theatre_schedule_project_plan.md` (который будет перенесен в `memory-bank/ui_development_plan.md` и другие соответствующие файлы).

## Активные решения и соображения:
*   Пользователь предпочитает, чтобы я изменял длинные тире на короткие непосредственно в шаблоне, а не модифицировал логику парсера, для обеспечения единообразия.
*   Проблема с уровнями заголовков в карточках спектаклей решена: заголовок "В ролях:" теперь генерируется как заголовок второго уровня (`==В ролях:==`), а остальные подзаголовки — третьего уровня (`===Пролог===`).

## Важные паттерны и предпочтения:
*   Не использовать команду `open http://...` для открытия браузера в WSL. Запускать PHP-сервер и предоставлять URL для ручной проверки.
*   Всегда использовать SQL-файлы для выполнения запросов `mariadb`, избегая прямой передачи запросов через командную строку `mariadb -e "..."`.

## Полученные знания и инсайты:
*   Важность единообразия в использовании символов (например, тире) в шаблонах для корректного парсинга.
*   Необходимость четкой структуры памяти проекта для эффективной работы после сброса контекста.
